<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🧬 Lab Protocol Assistant - Tu Compañero de Laboratorio</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Header Card */
        .header-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            animation: slideDown 0.5s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 20px;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo {
            font-size: 48px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .title h1 {
            font-size: 28px;
            background: linear-gradient(135deg, #00b4d8, #7209b7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 5px;
        }

        .title p {
            color: #6c757d;
            font-size: 14px;
        }

        /* Stats Cards */
        .stats {
            display: flex;
            gap: 15px;
        }

        .stat-card {
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            padding: 10px 20px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-2px);
        }

        .stat-icon {
            font-size: 24px;
        }

        .stat-value {
            font-weight: 700;
            font-size: 18px;
            color: #212529;
        }

        .stat-label {
            font-size: 11px;
            color: #6c757d;
        }

        /* Main Content */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .card-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #212529;
        }

        /* Search Section */
        .search-box {
            position: relative;
            margin-bottom: 15px;
        }

        .search-input {
            width: 100%;
            padding: 12px 50px 12px 15px;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.3s;
        }

        .search-input:focus {
            outline: none;
            border-color: #00b4d8;
            box-shadow: 0 0 0 3px rgba(0, 180, 216, 0.1);
        }

        .search-btn {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(135deg, #00b4d8, #0077b6);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .search-btn:hover {
            transform: translateY(-50%) scale(1.05);
        }

        /* Quick Tags */
        .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 15px;
        }

        .tag {
            background: #f8f9fa;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid transparent;
        }

        .tag:hover {
            background: #00b4d8;
            color: white;
            transform: translateY(-2px);
        }

        /* Progress Bar */
        .progress-container {
            margin: 20px 0;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 12px;
            color: #6c757d;
        }

        .progress-bar {
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00b4d8, #90e0ef);
            border-radius: 10px;
            transition: width 1s ease-out;
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.3),
                transparent
            );
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Categories */
        .categories {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .category-card {
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .category-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .category-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }

        .category-name {
            font-size: 13px;
            font-weight: 600;
            color: #212529;
        }

        .category-count {
            font-size: 11px;
            color: #6c757d;
        }

        /* Quiz Section */
        .quiz-question {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #212529;
        }

        .quiz-options {
            display: grid;
            gap: 8px;
        }

        .quiz-option {
            padding: 12px;
            background: #f8f9fa;
            border: 2px solid transparent;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .quiz-option:hover {
            background: #00b4d8;
            color: white;
            transform: translateX(5px);
        }

        .quiz-option.correct {
            background: #52b788;
            color: white;
            border-color: #2d6a4f;
        }

        .quiz-option.incorrect {
            background: #d62828;
            color: white;
            border-color: #8d0801;
        }

        /* Achievements */
        .achievements {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .achievement {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            transition: all 0.3s;
        }

        .achievement.unlocked {
            background: linear-gradient(135deg, #f77f00, #fcbf49);
            color: white;
        }

        .achievement:hover {
            transform: scale(1.05);
        }

        .achievement-icon {
            font-size: 28px;
            margin-bottom: 5px;
        }

        .achievement-name {
            font-size: 11px;
            font-weight: 600;
        }

        /* Tips Card */
        .tip-card {
            background: linear-gradient(135deg, #fff3cd, #fff9e6);
            border-left: 4px solid #f77f00;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .tip-icon {
            font-size: 20px;
            color: #f77f00;
            margin-bottom: 8px;
        }

        .tip-text {
            font-size: 14px;
            line-height: 1.5;
            color: #495057;
            font-style: italic;
        }

        /* Button Styles */
        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #00b4d8, #0077b6);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 180, 216, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, #52b788, #2d6a4f);
            color: white;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 700;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #6c757d;
        }

        .modal-close:hover {
            color: #d62828;
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #212529;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            display: none;
            animation: slideInRight 0.3s ease-out;
            z-index: 2000;
        }

        .toast.show {
            display: block;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .toast.success { background: #52b788; }
        .toast.error { background: #d62828; }
        .toast.warning { background: #f77f00; }

        /* Responsive */
        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            .stats {
                flex-direction: column;
                width: 100%;
            }
            .stat-card {
                justify-content: center;
            }
            .categories {
                grid-template-columns: 1fr;
            }
        }

        /* Loading */
        .loader {
            width: 40px;
            height: 40px;
            border: 3px solid #e9ecef;
            border-top-color: #00b4d8;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Full width card */
        .full-width-card {
            grid-column: 1 / -1;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header-card">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo">🧬</div>
                    <div class="title">
                        <h1>Lab Protocol Assistant</h1>
                        <p>Tu compañero inteligente en el laboratorio</p>
                    </div>
                </div>
                <div class="stats">
                    <div class="stat-card">
                        <span class="stat-icon">⭐</span>
                        <div>
                            <div class="stat-value" id="userPoints">0</div>
                            <div class="stat-label">Puntos</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-icon">📋</span>
                        <div>
                            <div class="stat-value" id="protocolCount">0</div>
                            <div class="stat-label">Protocolos</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-icon">🏆</span>
                        <div>
                            <div class="stat-value" id="achievementCount">0</div>
                            <div class="stat-label">Logros</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Grid -->
        <div class="main-grid">
            <!-- Search Card -->
            <div class="card">
                <h2 class="card-title">
                    <i class="fas fa-search"></i>
                    Buscar Protocolo
                </h2>
                
                <div class="search-box">
                    <input 
                        type="text" 
                        class="search-input" 
                        id="searchInput"
                        placeholder="Ej: PCR, Western blot, ELISA..."
                    >
                    <button class="search-btn" onclick="searchProtocol()">
                        <i class="fas fa-search"></i>
                    </button>
                </div>

                <div class="tags">
                    <span class="tag" onclick="quickSearch('PCR')">🧬 PCR</span>
                    <span class="tag" onclick="quickSearch('Western blot')">🔬 Western</span>
                    <span class="tag" onclick="quickSearch('ELISA')">🧪 ELISA</span>
                    <span class="tag" onclick="quickSearch('Cell culture')">🦠 Cultivo</span>
                    <span class="tag" onclick="quickSearch('qPCR')">📈 qPCR</span>
                </div>

                <div class="tip-card">
                    <div class="tip-icon">💡</div>
                    <div class="tip-text" id="tipText">
                        Tip: Siempre etiqueta tus tubos ANTES de añadir las muestras
                    </div>
                </div>
            </div>

            <!-- Progress Card -->
            <div class="card">
                <h2 class="card-title">
                    <i class="fas fa-chart-line"></i>
                    Tu Progreso
                </h2>
                
                <div class="progress-container">
                    <div class="progress-info">
                        <span>Nivel: <strong id="userLevel">Estudiante</strong></span>
                        <span>Siguiente: <strong id="nextLevel">100 pts</strong></span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressBar" style="width: 0%"></div>
                    </div>
                </div>

                <div class="achievements">
                    <div class="achievement unlocked" id="ach1">
                        <div class="achievement-icon">🔍</div>
                        <div class="achievement-name">Primera Búsqueda</div>
                    </div>
                    <div class="achievement" id="ach2">
                        <div class="achievement-icon">📋</div>
                        <div class="achievement-name">5 Protocolos</div>
                    </div>
                    <div class="achievement" id="ach3">
                        <div class="achievement-icon">🏆</div>
                        <div class="achievement-name">Experto</div>
                    </div>
                </div>
            </div>

            <!-- Categories Card -->
            <div class="card">
                <h2 class="card-title">
                    <i class="fas fa-flask"></i>
                    Categorías
                </h2>
                
                <div class="categories">
                    <div class="category-card" onclick="showCategory('molecular')">
                        <div class="category-icon">🧬</div>
                        <div class="category-name">Biología Molecular</div>
                        <div class="category-count">25 protocolos</div>
                    </div>
                    <div class="category-card" onclick="showCategory('protein')">
                        <div class="category-icon">🔬</div>
                        <div class="category-name">Proteínas</div>
                        <div class="category-count">18 protocolos</div>
                    </div>
                    <div class="category-card" onclick="showCategory('cell')">
                        <div class="category-icon">🦠</div>
                        <div class="category-name">Cultivo Celular</div>
                        <div class="category-count">22 protocolos</div>
                    </div>
                    <div class="category-card" onclick="showCategory('micro')">
                        <div class="category-icon">🧫</div>
                        <div class="category-name">Microbiología</div>
                        <div class="category-count">15 protocolos</div>
                    </div>
                </div>
            </div>

            <!-- Quiz Card -->
            <div class="card">
                <h2 class="card-title">
                    <i class="fas fa-question-circle"></i>
                    Quiz Rápido
                </h2>
                
                <div class="quiz-question" id="quizQuestion">
                    ¿Cuál es la temperatura de desnaturalización en PCR?
                </div>
                <div class="quiz-options" id="quizOptions">
                    <div class="quiz-option" onclick="checkAnswer(this, false)">72°C</div>
                    <div class="quiz-option" onclick="checkAnswer(this, true)">95°C</div>
                    <div class="quiz-option" onclick="checkAnswer(this, false)">55°C</div>
                    <div class="quiz-option" onclick="checkAnswer(this, false)">37°C</div>
                </div>
            </div>

            <!-- Actions Card -->
            <div class="card full-width-card">
                <h2 class="card-title">
                    <i class="fas fa-rocket"></i>
                    Acciones Rápidas
                </h2>
                
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <button class="btn btn-primary" onclick="showTutorial()">
                        <i class="fas fa-graduation-cap"></i> Tutorial
                    </button>
                    <button class="btn btn-primary" onclick="showCalculator()">
                        <i class="fas fa-calculator"></i> Calculadora
                    </button>
                    <button class="btn btn-primary" onclick="showResources()">
                        <i class="fas fa-book"></i> Recursos
                    </button>
                    <button class="btn btn-success" onclick="generateProtocol()">
                        <i class="fas fa-magic"></i> Generar Protocolo
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">Título</h2>
                <button class="modal-close" onclick="closeModal()">×</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Contenido dinámico -->
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <script>
        // User data
        let userData = {
            points: 0,
            protocols: 0,
            achievements: 0,
            level: "Estudiante",
            searches: []
        };

        // Load saved data
        function loadUserData() {
            const saved = localStorage.getItem('labAssistantData');
            if (saved) {
                userData = JSON.parse(saved);
                updateUI();
            }
        }

        // Save data
        function saveUserData() {
            localStorage.setItem('labAssistantData', JSON.stringify(userData));
        }

        // Update UI
        function updateUI() {
            document.getElementById('userPoints').textContent = userData.points;
            document.getElementById('protocolCount').textContent = userData.protocols;
            document.getElementById('achievementCount').textContent = userData.achievements;
            
            // Update level
            if (userData.points >= 500) {
                userData.level = "Experto";
            } else if (userData.points >= 250) {
                userData.level = "Investigador";
            } else if (userData.points >= 100) {
                userData.level = "Asistente";
            } else {
                userData.level = "Estudiante";
            }
            document.getElementById('userLevel').textContent = userData.level;
            
            // Update progress
            const nextLevelPoints = userData.points < 100 ? 100 : 
                                  userData.points < 250 ? 250 : 
                                  userData.points < 500 ? 500 : 1000;
            document.getElementById('nextLevel').textContent = nextLevelPoints + ' pts';
            
            const progress = (userData.points % nextLevelPoints) / nextLevelPoints * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            
            // Update achievements
            if (userData.protocols >= 5) {
                document.getElementById('ach2').classList.add('unlocked');
            }
            if (userData.points >= 500) {
                document.getElementById('ach3').classList.add('unlocked');
            }
            
            saveUserData();
        }

        // Search protocol
        function searchProtocol() {
            const query = document.getElementById('searchInput').value;
            if (!query) {
                showToast('Por favor ingresa un término de búsqueda', 'warning');
                return;
            }

            showModal('Buscando...', '<div class="loader"></div>');
            
            setTimeout(() => {
                userData.points += 5;
                userData.searches.push(query);
                if (userData.searches.length === 1) {
                    userData.achievements++;
                    showToast('🏆 ¡Logro desbloqueado: Primera búsqueda!', 'success');
                }
                updateUI();
                closeModal();
                showToast(`Búsqueda "${query}" completada! +5 puntos`, 'success');
                showResults(query);
            }, 1500);
        }

        // Quick search
        function quickSearch(term) {
            document.getElementById('searchInput').value = term;
            searchProtocol();
        }

        // Show category
        function showCategory(category) {
            const categories = {
                molecular: {
                    title: 'Biología Molecular',
                    protocols: ['PCR estándar', 'qPCR', 'Clonación', 'Extracción ADN']
                },
                protein: {
                    title: 'Análisis de Proteínas',
                    protocols: ['Western Blot', 'ELISA', 'SDS-PAGE', 'Bradford']
                },
                cell: {
                    title: 'Cultivo Celular',
                    protocols: ['Pase celular', 'Transfección', 'Criopreservación', 'MTT']
                },
                micro: {
                    title: 'Microbiología',
                    protocols: ['Cultivo bacteriano', 'Transformación', 'Tinción Gram']
                }
            };

            const cat = categories[category];
            let content = `<h3>${cat.title}</h3><ul style="list-style: none; padding: 0;">`;
            cat.protocols.forEach(p => {
                content += `<li style="padding: 8px; background: #f8f9fa; margin: 5px 0; border-radius: 5px; cursor: pointer;" onclick="generateProtocol('${p}')">${p}</li>`;
            });
            content += '</ul>';
            showModal(cat.title, content);
        }

        // Generate protocol
        function generateProtocol(name) {
            userData.protocols++;
            userData.points += 25;
            if (userData.protocols === 5) {
                userData.achievements++;
                showToast('🏆 ¡Logro desbloqueado: 5 Protocolos!', 'success');
            }
            updateUI();
            closeModal();
            showToast(`¡Protocolo generado! +25 puntos`, 'success');
        }

        // Show results
        function showResults(query) {
            const content = `
                <h3>Resultados para: ${query}</h3>
                <p>Se encontraron 3 artículos relevantes:</p>
                <ul>
                    <li>Optimización de ${query} (2024)</li>
                    <li>Protocolo mejorado de ${query} (2023)</li>
                    <li>${query}: Guía completa (2022)</li>
                </ul>
                <button class="btn btn-success" onclick="generateProtocol('${query}')">
                    Generar Protocolo
                </button>
            `;
            showModal('Resultados', content);
        }

        // Check answer
        function checkAnswer(element, isCorrect) {
            const options = document.querySelectorAll('.quiz-option');
            options.forEach(opt => opt.onclick = null);

            if (isCorrect) {
                element.classList.add('correct');
                userData.points += 10;
                updateUI();
                showToast('¡Correcto! +10 puntos', 'success');
            } else {
                element.classList.add('incorrect');
                showToast('Incorrecto', 'error');
            }

            setTimeout(() => {
                loadNewQuiz();
            }, 2000);
        }

        // Load new quiz
        function loadNewQuiz() {
            const questions = [
                {
                    q: "¿Qué significa PCR?",
                    options: ["Protein Chain Reaction", "Polymerase Chain Reaction", "Peptide Chemical Reaction", "Phosphate Catalytic Reaction"],
                    correct: 1
                },
                {
                    q: "¿Cuál es el pH del buffer TAE?",
                    options: ["6.0", "7.4", "8.3", "9.0"],
                    correct: 2
                },
                {
                    q: "¿Qué enzima se usa en PCR?",
                    options: ["ADN ligasa", "Taq polimerasa", "Restrictasa", "Transcriptasa"],
                    correct: 1
                }
            ];

            const quiz = questions[Math.floor(Math.random() * questions.length)];
            document.getElementById('quizQuestion').textContent = quiz.q;
            
            const optionsHtml = quiz.options.map((opt, i) => 
                `<div class="quiz-option" onclick="checkAnswer(this, ${i === quiz.correct})">${opt}</div>`
            ).join('');
            document.getElementById('quizOptions').innerHTML = optionsHtml;
        }

        // Show tutorial
        function showTutorial() {
            const content = `
                <h3>Tutorial Rápido</h3>
                <ol>
                    <li><strong>Busca:</strong> Ingresa el protocolo que necesitas</li>
                    <li><strong>Selecciona:</strong> Elige entre los resultados</li>
                    <li><strong>Genera:</strong> Obtén un protocolo estandarizado</li>
                    <li><strong>Gana:</strong> Acumula puntos y logros</li>
                </ol>
                <p>¡Completa quizzes para ganar puntos extra!</p>
                <button class="btn btn-primary" onclick="closeModal()">Entendido</button>
            `;
            showModal('Tutorial', content);
            userData.points += 20;
            updateUI();
            showToast('¡Tutorial completado! +20 puntos', 'success');
        }

        // Show calculator
        function showCalculator() {
            const content = `
                <h3>Calculadora de Diluciones</h3>
                <p>C1V1 = C2V2</p>
                <input type="number" id="c1" placeholder="C1 (concentración inicial)" style="width: 100%; padding: 8px; margin: 5px 0;">
                <input type="number" id="v1" placeholder="V1 (volumen inicial)" style="width: 100%; padding: 8px; margin: 5px 0;">
                <input type="number" id="c2" placeholder="C2 (concentración final)" style="width: 100%; padding: 8px; margin: 5px 0;">
                <input type="number" id="v2" placeholder="V2 (volumen final)" style="width: 100%; padding: 8px; margin: 5px 0;">
                <button class="btn btn-primary" onclick="calculate()">Calcular</button>
                <div id="calcResult" style="margin-top: 10px;"></div>
            `;
            showModal('Calculadora', content);
        }

        // Calculate
        function calculate() {
            const c1 = parseFloat(document.getElementById('c1').value);
            const c2 = parseFloat(document.getElementById('c2').value);
            const v2 = parseFloat(document.getElementById('v2').value);
            
            if (c1 && c2 && v2) {
                const v1 = (c2 * v2) / c1;
                document.getElementById('calcResult').innerHTML = `
                    <strong>Resultado:</strong><br>
                    Necesitas ${v1.toFixed(2)} unidades de solución inicial<br>
                    Añade ${(v2 - v1).toFixed(2)} unidades de diluyente
                `;
            }
        }

        // Show resources
        function showResources() {
            const content = `
                <h3>Recursos Útiles</h3>
                <ul>
                    <li>📚 Protocol.io - Repositorio de protocolos</li>
                    <li>🎥 JoVE - Videos de técnicas</li>
                    <li>🧬 Addgene - Protocolos moleculares</li>
                    <li>📖 PubMed - Literatura científica</li>
                </ul>
                <button class="btn btn-primary" onclick="closeModal()">Cerrar</button>
            `;
            showModal('Recursos', content);
        }

        // Modal functions
        function showModal(title, content) {
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalBody').innerHTML = content;
            document.getElementById('modal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }

        // Toast
        function showToast(message, type = 'info') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = 'toast show ' + type;
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Load tips
        function loadTips() {
            const tips = [
                "Siempre etiqueta tus tubos ANTES de añadir las muestras",
                "Calibra tus pipetas regularmente para resultados precisos",
                "Mantén un cuaderno de laboratorio detallado",
                "Usa controles positivos y negativos en cada experimento",
                "El hielo es tu mejor amigo cuando trabajas con enzimas",
                "Planifica tu experimento antes de empezar",
                "La reproducibilidad es la clave del método científico",
                "Verifica el pH de tus buffers antes de usarlos",
                "Mantén tu área de trabajo limpia y organizada",
                "Lee el protocolo completo antes de empezar"
            ];

            setInterval(() => {
                const randomTip = tips[Math.floor(Math.random() * tips.length)];
                document.getElementById('tipText').textContent = `Tip: ${randomTip}`;
            }, 5000);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadUserData();
            loadTips();
            updateUI();
            
            // Animate initial values
            setTimeout(() => {
                if (userData.points === 0) {
                    showToast('¡Bienvenido! Completa tu primera búsqueda para ganar puntos', 'info');
                }
            }, 1000);
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && document.activeElement.id === 'searchInput') {
                searchProtocol();
            }
            if (e.key === 'Escape') {
                closeModal();
            }
        });
    </script>
</body>
</html>